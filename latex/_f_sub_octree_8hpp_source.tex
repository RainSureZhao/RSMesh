\doxysection{FSub\+Octree.\+hpp}
\hypertarget{_f_sub_octree_8hpp_source}{}\label{_f_sub_octree_8hpp_source}\index{third\_party/ScalFMM/include/ScalFMM/Containers/FSubOctree.hpp@{third\_party/ScalFMM/include/ScalFMM/Containers/FSubOctree.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ See\ LICENCE\ file\ at\ project\ root}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#ifndef\ FSUBOCTREE\_HPP}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#define\ FSUBOCTREE\_HPP}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}../Utils/FGlobal.hpp"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}../Utils/FPoint.hpp"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}../Utils/FAssert.hpp"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}../Utils/FMath.hpp"{}}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}FTreeCoordinate.hpp"{}}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ FReal,\ \textcolor{keyword}{class}\ CellClass\ ,\ \textcolor{keyword}{class}\ ContainerClass,\ \textcolor{keyword}{class}\ LeafClass,\ \textcolor{keyword}{class}\ CellAllocatorClass>}
\DoxyCodeLine{00037\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}\ \{}
\DoxyCodeLine{00038\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ CellClass***\ cells;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//<\ Potential\ cells,\ cells\ are\ allocated\ only\ if\ needed}}
\DoxyCodeLine{00041\ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}*\ \textcolor{keyword}{const}\ parent;\ \ \ \ \ \ \ \textcolor{comment}{//<\ Parent\ suboctree\ (null\ for\ root)}}
\DoxyCodeLine{00042\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ indexInParent;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//<\ This\ is\ the\ index\ of\ the\ current\ octree\ in\ the\ parent's\ array}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{int}\ leftLeafIndex;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//<\ The\ leaf\ at\ the\ left\ position\ (this\ is\ the\ array\ index\ to\ start\ when\ iterate)}}
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{int}\ rightLeafIndex;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//<\ The\ leaf\ at\ the\ right\ position\ (this\ is\ the\ last\ array\ index\ when\ iterate)}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ subOctreeHeight;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//<\ Height\ of\ this\ suboctree}}
\DoxyCodeLine{00049\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ subOctreePosition;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//<\ Level\ of\ the\ current\ suboctree\ in\ the\ global\ tree\ (0\ if\ node)}}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ isLeafSubtree;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//<\ To\ know\ if\ a\ subtree\ is\ leaf\ or\ not\ (we\ prefere\ that\ to\ a\ virtual\ method)}}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ CellAllocatorClass\ cellAllocator;}
\DoxyCodeLine{00054\ }
\DoxyCodeLine{00064\ \ \ \ \ MortonIndex\ \mbox{\hyperlink{class_f_abstract_sub_octree_a2e6f0fbaf44bffd7750bf8693616be37}{getLeafIndex}}(\textcolor{keyword}{const}\ MortonIndex\ index,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inTreeHeight)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Remove\ right\ useless\ part\ -\/\ used\ by\ child}}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ fullIndex\ =\ index\ >>\ (3\ *\ (inTreeHeight\ -\/\ (this-\/>subOctreeHeight\ +\ this-\/>subOctreePosition)\ )\ );}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Remove\ left\ extra\ data\ part\ -\/\ used\ by\ parent}}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ treeLeafMask\ =\ \string~(\string~0ULL\ <<\ (3\ *\ \ this-\/>subOctreeHeight\ ));}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ treeLeafMask\ \&\ fullIndex;}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00079\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a76762507d25c257b44d2750aaf316c4f}{createPreviousCells}}(MortonIndex\ arrayIndex,\ MortonIndex\ inLeafCellIndex,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_tree_coordinate}{FTreeCoordinate}}\&\ treePosition)\{}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ indexLevel\ =\ this-\/>subOctreeHeight\ -\/\ 1;}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ bottomToTop\ =\ 0;}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(indexLevel\ >=\ 0\ \&\&\ !this-\/>cells[indexLevel][arrayIndex])\{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ CellClass*\ \textcolor{keyword}{const}\ newNode\ =\ cellAllocator.newObject();\textcolor{comment}{//new\ CellClass();}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ newNode-\/>setMortonIndex(inLeafCellIndex);}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ newNode-\/>setCoordinate(treePosition.\mbox{\hyperlink{class_f_point_a58d3859160347552d6a4a94fbdf883c3}{getX}}()\ >>\ bottomToTop,}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ treePosition.\mbox{\hyperlink{class_f_point_ae4383512b9b8d216775b3fb92325cfc9}{getY}}()\ >>\ bottomToTop,}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ treePosition.\mbox{\hyperlink{class_f_point_a02208d4db50cbafe597adcbfb152b536}{getZ}}()\ >>\ bottomToTop);}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ newNode-\/>setLevel(this-\/>subOctreePosition\ +\ indexLevel);}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>cells[indexLevel][arrayIndex]\ =\ newNode;}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/indexLevel;}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ ++bottomToTop;}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ arrayIndex\ >>=\ 3;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ inLeafCellIndex\ >>=\ 3;}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a13e167390ab62e103952b37e97e45338}{newLeafInserted}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ arrayIndex,\ \textcolor{keyword}{const}\ MortonIndex\ inLeafCellIndex,\ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_tree_coordinate}{FTreeCoordinate}}\&\ host)\{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree_a76762507d25c257b44d2750aaf316c4f}{createPreviousCells}}(arrayIndex,inLeafCellIndex,\ host);}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ if\ this\ is\ the\ bottom\ left}}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(arrayIndex\ <\ this-\/>leftLeafIndex)\ this-\/>leftLeafIndex\ =\ arrayIndex;}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(arrayIndex\ >\ this-\/>rightLeafIndex)\ this-\/>rightLeafIndex\ =\ arrayIndex;}
\DoxyCodeLine{00112\ \ \ \ \ \}}
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00120\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a0a25af8c62187c430a4360f3e1465159}{removeCellsFromLeaf}}(\ \textcolor{keywordtype}{int}\ arrayIndex\ )\{}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ last\ array\ index}}
\DoxyCodeLine{00122\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ indexLevel\ =\ this-\/>subOctreeHeight\ -\/\ 1;}
\DoxyCodeLine{00123\ }
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Manage\ border\ limits}}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(arrayIndex\ ==\ this-\/>leftLeafIndex\ \&\&\ arrayIndex\ ==\ this-\/>rightLeafIndex)\{}
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>rightLeafIndex\ =\ -\/1;}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ only\ one\ cells,\ return\ true}}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(arrayIndex\ ==\ this-\/>leftLeafIndex)\{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ !this-\/>cells[indexLevel][++this-\/>leftLeafIndex]\ );}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}(arrayIndex\ ==\ this-\/>rightLeafIndex)\{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(\ !this-\/>cells[indexLevel][-\/-\/this-\/>rightLeafIndex]\ );}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ the\ last\ cells}}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ cellAllocator.deleteObject(this-\/>cells[indexLevel][arrayIndex]);}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ this-\/>cells[indexLevel][arrayIndex]\ =\textcolor{keyword}{nullptr};}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ progress\ upper}}
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ -\/-\/indexLevel;}
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ arrayIndex\ >>=\ 3;}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ to\ test\ if\ 8\ child\ are\ empty}}
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ CellClass*\ emptyArray[8];}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ memset(emptyArray\ ,\ 0,\ \textcolor{keyword}{sizeof}(CellClass*)\ *\ 8);}
\DoxyCodeLine{00146\ }
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ continue\ while\ we\ are\ not\ in\ the\ last\ level\ and\ our\ child\ are\ empty}}
\DoxyCodeLine{00148\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}(indexLevel\ >=\ 0\ \&\&\ memcmp(\&this-\/>cells[indexLevel+1][arrayIndex<<3],\ emptyArray,\ 8\ *\ \textcolor{keyword}{sizeof}(CellClass*))\ ==\ 0\ )\{}
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \ \ \ \ cellAllocator.deleteObject(\ this-\/>cells[indexLevel][arrayIndex]\ );}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>cells[indexLevel][arrayIndex]\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/indexLevel;}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ \ \ \ \ arrayIndex\ >>=\ 3;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ return\ true\ if\ there\ is\ no\ more\ child\ ==\ 0\ cell\ at\ level\ 0}}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ memcmp(this-\/>cells[0],\ emptyArray,\ 8\ *\ \textcolor{keyword}{sizeof}(CellClass*))\ ==\ 0;}
\DoxyCodeLine{00157\ \ \ \ \ \}}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00160\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00161\ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}\&)\{\}}
\DoxyCodeLine{00162\ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}\&\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}\&)\{\textcolor{keywordflow}{return}\ *\textcolor{keyword}{this};\}}
\DoxyCodeLine{00163\ }
\DoxyCodeLine{00164\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00172\ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree_a515d55d96f3760560d1826866f618eff}{FAbstractSubOctree}}(\mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}*\ \textcolor{keyword}{const}\ inParent,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inIndexInParent,}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inSubOctreeHeight,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inSubOctreePosition,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ inIsLeafSubtree)\ :}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cells(nullptr),\ parent(\ inParent\ ),\ indexInParent(inIndexInParent),\ leftLeafIndex(1\ <<\ (3\ *\ inSubOctreeHeight)),\ rightLeafIndex(-\/1),}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ subOctreeHeight(\ inSubOctreeHeight\ ),\ subOctreePosition(\ inSubOctreePosition\ ),\ isLeafSubtree(inIsLeafSubtree)\ \{}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ this-\/>cells\ =\ \textcolor{keyword}{new}\ CellClass**[this-\/>subOctreeHeight];}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ FAssertLF(this-\/>cells,\ \textcolor{stringliteral}{"{}Allocation\ failled"{}});}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ memset(this-\/>cells,\ 0,\ \textcolor{keyword}{sizeof}(CellClass**)\ *\ subOctreeHeight);}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ start\ at\ a\ sub-\/level\ -\/\ 8\string^1}}
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ cellsAtlevel\ =\ 8;}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{int}\ indexLevel\ =\ 0\ ;\ indexLevel\ <\ this-\/>subOctreeHeight\ ;\ ++indexLevel\ )\{}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>cells[indexLevel]\ =\ \textcolor{keyword}{new}\ CellClass*[cellsAtlevel];}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ \ \ \ \ FAssertLF(this-\/>cells[indexLevel],\ \textcolor{stringliteral}{"{}Allocation\ failled"{}});}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ memset(this-\/>cells[indexLevel],\ 0,\ \textcolor{keyword}{sizeof}(CellClass*)\ *\ cellsAtlevel);}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ cellsAtlevel\ <<=\ 3;\ \textcolor{comment}{//\ =>\ *\ 8\ >>\ 8\string^indexLevel}}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00192\ \ \ \ \ \}}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a27cf32745a2164a3be2331b47050e0ce}{\string~FAbstractSubOctree}}()\{}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ mostRight\ =\ rightLeafIndex;}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ mostLeft\ =\ leftLeafIndex;}
\DoxyCodeLine{00201\ }
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{int}\ indexLevel\ =\ this-\/>subOctreeHeight\ -\/\ 1\ ;\ indexLevel\ >=\ 0\ ;\ -\/-\/indexLevel\ )\{}
\DoxyCodeLine{00203\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{int}\ indexCells\ =\ mostLeft\ ;\ indexCells\ <=\ mostRight\ ;\ ++indexCells\ )\{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this-\/>cells[indexLevel][indexCells])\{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ cellAllocator.deleteObject(\ this-\/>cells[indexLevel][indexCells]\ );}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ }
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\ this-\/>cells[indexLevel];}
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \ \ \ \ mostLeft\ \ >>=\ 3;}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \ \ \ \ mostRight\ >>=\ 3;}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\ this-\/>cells;}
\DoxyCodeLine{00215\ \ \ \ \ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ }
\DoxyCodeLine{00224\ \ \ \ \ \textcolor{comment}{/*template<typename...\ Args>}}
\DoxyCodeLine{00225\ \textcolor{comment}{\ \ \ \ void\ insert(const\ MortonIndex\ index,\ const\ FTreeCoordinate\&\ host,\ const\ int\ inTreeHeight,\ const\ FPoint<FReal>\&\ inParticlePosition,}}
\DoxyCodeLine{00226\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Args...\ args)\{}}
\DoxyCodeLine{00227\ \textcolor{comment}{\ \ \ \ \}*/}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00233\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_abstract_sub_octree_ac7f182a25b647bc54b21d663be54bdfd}{removeLeaf}}(\textcolor{keyword}{const}\ MortonIndex\ index,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inTreeHeight)\ =\ 0;}
\DoxyCodeLine{00234\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{comment}{//\ This\ is\ the\ FOctree::Iterator\ Part}}
\DoxyCodeLine{00238\ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_f_abstract_sub_octree_ad9f3abf46b21de91bcad5a2d37fadf53}{getSubOctreeHeight}}()\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ subOctreeHeight;}
\DoxyCodeLine{00243\ \ \ \ \ \}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00247\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_f_abstract_sub_octree_ae4a0b99836c592fe29aa4beb790ef67a}{getSubOctreePosition}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ subOctreePosition;}
\DoxyCodeLine{00249\ \ \ \ \ \}}
\DoxyCodeLine{00250\ }
\DoxyCodeLine{00254\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a236da7fc2c05843766d6886943b11294}{getLeftLeafIndex}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ leftLeafIndex;}
\DoxyCodeLine{00256\ \ \ \ \ \}}
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00261\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a63a17e493316d4783dff0f364f29dc7f}{getRightLeafIndex}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00262\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rightLeafIndex;}
\DoxyCodeLine{00263\ \ \ \ \ \}}
\DoxyCodeLine{00264\ }
\DoxyCodeLine{00268\ \ \ \ \ CellClass**\ \mbox{\hyperlink{class_f_abstract_sub_octree_a050cd28487c6de247f43754e4704d4f9}{cellsAt}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ level)\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ FAssertLF(level\ <\ subOctreeHeight,\ \textcolor{stringliteral}{"{}Level\ out\ of\ memory"{}});}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cells[level];}
\DoxyCodeLine{00271\ \ \ \ \ \}}
\DoxyCodeLine{00272\ }
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_abstract_sub_octree_ae4463c8521a998faea5ef22881eaaab2}{hasParent}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ parent;}
\DoxyCodeLine{00277\ \ \ \ \ \}}
\DoxyCodeLine{00278\ }
\DoxyCodeLine{00281\ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}*\ \mbox{\hyperlink{class_f_abstract_sub_octree_aecf661b9a25c2ba8e900d746bd9925f8}{getParent}}()\{}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ parent;}
\DoxyCodeLine{00283\ \ \ \ \ \}}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00287\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}*\ \mbox{\hyperlink{class_f_abstract_sub_octree_a1006838e9ccf9915596759f51b4ad4bd}{getParent}}()\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00288\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ parent;}
\DoxyCodeLine{00289\ \ \ \ \ \}}
\DoxyCodeLine{00290\ }
\DoxyCodeLine{00295\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a247a065649be7bbda0b4a95bffbded68}{getIndexInParent}}()\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00296\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ indexInParent;}
\DoxyCodeLine{00297\ \ \ \ \ \}}
\DoxyCodeLine{00298\ }
\DoxyCodeLine{00303\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a421a3044968d532b28a3ac6c5ad61948}{isLeafPart}}()\textcolor{keyword}{\ const}\{}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>isLeafSubtree;}
\DoxyCodeLine{00305\ \ \ \ \ \}}
\DoxyCodeLine{00306\ \};}
\DoxyCodeLine{00307\ }
\DoxyCodeLine{00308\ }
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00311\ \textcolor{comment}{//\ Last\ level\ sub\ octree}}
\DoxyCodeLine{00313\ }
\DoxyCodeLine{00326\ \textcolor{keyword}{template}<\ \textcolor{keyword}{class}\ FReal,\ \textcolor{keyword}{class}\ CellClass\ ,\ \textcolor{keyword}{class}\ ContainerClass,\ \textcolor{keyword}{class}\ LeafClass,\ \textcolor{keyword}{class}\ CellAllocatorClass>}
\DoxyCodeLine{00327\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_sub_octree_with_leafs}{FSubOctreeWithLeafs}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}<FReal,\ CellClass,ContainerClass,LeafClass,\ CellAllocatorClass>\ \{}
\DoxyCodeLine{00328\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00329\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree<FReal,\ CellClass,ContainerClass,LeafClass,\ CellAllocatorClass>}}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{Parent}};}
\DoxyCodeLine{00330\ }
\DoxyCodeLine{00331\ \ \ \ \ LeafClass**\ leafs;\ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//<\ Leafs\ array}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00334\ \ \ \ \ \mbox{\hyperlink{class_f_sub_octree_with_leafs}{FSubOctreeWithLeafs}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_sub_octree_with_leafs}{FSubOctreeWithLeafs}}\&)\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00335\ \ \ \ \ \mbox{\hyperlink{class_f_sub_octree_with_leafs}{FSubOctreeWithLeafs}}\&\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_sub_octree_with_leafs}{FSubOctreeWithLeafs}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00336\ }
\DoxyCodeLine{00344\ \ \ \ \ \mbox{\hyperlink{class_f_sub_octree_with_leafs_a78198a4e76ad3224968cc31cea40bab4}{FSubOctreeWithLeafs}}(\mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree<FReal,CellClass,ContainerClass,LeafClass,CellAllocatorClass>}}*\ \textcolor{keyword}{const}\ inParent,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inIndexInParent,}
\DoxyCodeLine{00345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inSubOctreeHeight,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inSubOctreePosition)\ :}
\DoxyCodeLine{00346\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}<FReal,CellClass,ContainerClass,LeafClass,CellAllocatorClass>(inParent,\ inIndexInParent,\ inSubOctreeHeight,\ inSubOctreePosition,\ true)\ \{}
\DoxyCodeLine{00347\ }
\DoxyCodeLine{00348\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ cellsAtLeafLevel\ =\ 1\ <<\ (3\ *\ inSubOctreeHeight);}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ \ \ \ \ \ \ \ \ this-\/>leafs\ =\ \textcolor{keyword}{new}\ LeafClass*[cellsAtLeafLevel];}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ FAssertLF(this-\/>leafs,\ \textcolor{stringliteral}{"{}Allocation\ failled"{}});}
\DoxyCodeLine{00352\ }
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ memset(leafs,\ 0,\ \textcolor{keyword}{sizeof}(LeafClass*)\ *\ cellsAtLeafLevel);}
\DoxyCodeLine{00354\ \ \ \ \ \}}
\DoxyCodeLine{00355\ }
\DoxyCodeLine{00359\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{class_f_sub_octree_with_leafs_a98e30dec1145147e954942a1c9029790}{\string~FSubOctreeWithLeafs}}()\{}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{int}\ indexLeaf\ =\ Parent::leftLeafIndex\ ;\ indexLeaf\ <=\ Parent::rightLeafIndex\ ;\ ++indexLeaf\ )\{}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this-\/>leafs[indexLeaf])\{}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ this-\/>leafs[indexLeaf];}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\ this-\/>leafs;}
\DoxyCodeLine{00366\ \ \ \ \ \}}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00371\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00372\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_f_sub_octree_with_leafs_a1096ffbe5aaa3f9e99c91e1868490720}{insert}}(\textcolor{keyword}{const}\ MortonIndex\ index,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_tree_coordinate}{FTreeCoordinate}}\&\ host,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inTreeHeight,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_point}{FPoint<FReal>}}\&\ inParticlePosition,}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Args...\ args)\{}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ morton\ index\ for\ the\ leaf\ level}}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ arrayIndex\ =\ \mbox{\hyperlink{class_f_abstract_sub_octree_a2e6f0fbaf44bffd7750bf8693616be37}{Parent::getLeafIndex}}(index,inTreeHeight);}
\DoxyCodeLine{00376\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is\ there\ already\ a\ leaf?}}
\DoxyCodeLine{00377\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !this-\/>leafs[arrayIndex]\ )\{}
\DoxyCodeLine{00378\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>leafs[arrayIndex]\ =\ \textcolor{keyword}{new}\ LeafClass();}
\DoxyCodeLine{00379\ }
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree_a13e167390ab62e103952b37e97e45338}{Parent::newLeafInserted}}(\ \textcolor{keywordtype}{int}(arrayIndex)\ ,\ index,\ host);}
\DoxyCodeLine{00381\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00382\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ particle\ to\ leaf\ list}}
\DoxyCodeLine{00383\ \ \ \ \ \ \ \ \ this-\/>leafs[arrayIndex]-\/>push(inParticlePosition,\ args...\ );}
\DoxyCodeLine{00384\ \ \ \ \ \}}
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ \ \ \ \ LeafClass*\ createLeaf(\textcolor{keyword}{const}\ MortonIndex\ index,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_tree_coordinate}{FTreeCoordinate}}\&\ host,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inTreeHeight)\{}
\DoxyCodeLine{00387\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ morton\ index\ for\ the\ leaf\ level}}
\DoxyCodeLine{00388\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ arrayIndex\ =\ \mbox{\hyperlink{class_f_abstract_sub_octree_a2e6f0fbaf44bffd7750bf8693616be37}{Parent::getLeafIndex}}(index,inTreeHeight);}
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ is\ there\ already\ a\ leaf?}}
\DoxyCodeLine{00390\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !this-\/>leafs[arrayIndex]\ )\{}
\DoxyCodeLine{00391\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>leafs[arrayIndex]\ =\ \textcolor{keyword}{new}\ LeafClass();}
\DoxyCodeLine{00392\ }
\DoxyCodeLine{00393\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree_a13e167390ab62e103952b37e97e45338}{Parent::newLeafInserted}}(\ \textcolor{keywordtype}{int}(arrayIndex)\ ,\ index,\ host);}
\DoxyCodeLine{00394\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00395\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ particle\ to\ leaf\ list}}
\DoxyCodeLine{00396\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>leafs[arrayIndex];}
\DoxyCodeLine{00397\ \ \ \ \ \}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00402\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_sub_octree_with_leafs_ab57adb129b6c2789504c438fbce182ce}{removeLeaf}}(\textcolor{keyword}{const}\ MortonIndex\ index,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inTreeHeight)\ \{}
\DoxyCodeLine{00403\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ morton\ index\ for\ the\ leaf\ level}}
\DoxyCodeLine{00404\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ arrayIndex\ =\ \mbox{\hyperlink{class_f_abstract_sub_octree_a2e6f0fbaf44bffd7750bf8693616be37}{Parent::getLeafIndex}}(index,inTreeHeight);}
\DoxyCodeLine{00405\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ this-\/>leafs[arrayIndex]\ )\{}
\DoxyCodeLine{00406\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ container}}
\DoxyCodeLine{00407\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ this-\/>leafs[arrayIndex];}
\DoxyCodeLine{00408\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>leafs[arrayIndex]\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a0a25af8c62187c430a4360f3e1465159}{Parent::removeCellsFromLeaf}}(\ \textcolor{keywordtype}{int}(arrayIndex)\ );}
\DoxyCodeLine{00411\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00412\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00413\ \ \ \ \ \}}
\DoxyCodeLine{00414\ }
\DoxyCodeLine{00418\ \ \ \ \ ContainerClass*\ \mbox{\hyperlink{class_f_sub_octree_with_leafs_a59bc247222a0327a8595bd0ba7644ee7}{getLeafSrc}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ index)\{}
\DoxyCodeLine{00419\ \ \ \ \ \ \ \ \ LeafClass*\ \textcolor{keyword}{const}\ leaf\ =\ this-\/>leafs[index];}
\DoxyCodeLine{00420\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (leaf\ ?\ leaf-\/>getSrc():\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00421\ \ \ \ \ \}}
\DoxyCodeLine{00422\ }
\DoxyCodeLine{00426\ \ \ \ \ ContainerClass*\ \mbox{\hyperlink{class_f_sub_octree_with_leafs_adf39c505c5224371d0637fa5f03b8511}{getLeafTargets}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ index)\{}
\DoxyCodeLine{00427\ \ \ \ \ \ \ \ \ LeafClass*\ \textcolor{keyword}{const}\ leaf\ =\ this-\/>leafs[index];}
\DoxyCodeLine{00428\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (leaf\ ?\ leaf-\/>getTargets():\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00429\ \ \ \ \ \}}
\DoxyCodeLine{00430\ }
\DoxyCodeLine{00434\ \ \ \ \ \textcolor{keyword}{const}\ ContainerClass*\ \mbox{\hyperlink{class_f_sub_octree_with_leafs_a56b44106b4e66be077d4933e4574d756}{getLeafSrc}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00435\ \ \ \ \ \ \ \ \ LeafClass*\ \textcolor{keyword}{const}\ leaf\ =\ this-\/>leafs[index];}
\DoxyCodeLine{00436\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (leaf\ ?\ leaf-\/>getSrc():\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00437\ \ \ \ \ \}}
\DoxyCodeLine{00438\ }
\DoxyCodeLine{00442\ \ \ \ \ \textcolor{keyword}{const}\ ContainerClass*\ \mbox{\hyperlink{class_f_sub_octree_with_leafs_a194610f2a1105aeadde48625157db32c}{getLeafTargets}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00443\ \ \ \ \ \ \ \ \ LeafClass*\ \textcolor{keyword}{const}\ leaf\ =\ this-\/>leafs[index];}
\DoxyCodeLine{00444\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (leaf\ ?\ leaf-\/>getTargets()\ :\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00445\ \ \ \ \ \}}
\DoxyCodeLine{00446\ }
\DoxyCodeLine{00447\ \ \ \ \ LeafClass*\ getLeaf(\textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ index)\{}
\DoxyCodeLine{00448\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>leafs[index];}
\DoxyCodeLine{00449\ \ \ \ \ \}}
\DoxyCodeLine{00450\ \};}
\DoxyCodeLine{00451\ }
\DoxyCodeLine{00452\ }
\DoxyCodeLine{00453\ }
\DoxyCodeLine{00455\ \textcolor{comment}{//\ Middle\ level\ sub\ octree}}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00471\ \textcolor{keyword}{template}<\textcolor{keyword}{class}\ FReal,\ \textcolor{keyword}{class}\ CellClass\ ,\ \textcolor{keyword}{class}\ ContainerClass,\ \textcolor{keyword}{class}\ LeafClass,\ \textcolor{keyword}{class}\ CellAllocatorClass>}
\DoxyCodeLine{00472\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_sub_octree}{FSubOctree}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}<FReal,\ CellClass,ContainerClass,LeafClass,\ CellAllocatorClass>\ \{}
\DoxyCodeLine{00473\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00474\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree<FReal,\ CellClass,ContainerClass,LeafClass,CellAllocatorClass>}}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{Parent}};}
\DoxyCodeLine{00475\ \ \ \ \ \textcolor{keyword}{typedef}\ \mbox{\hyperlink{class_f_sub_octree_with_leafs}{FSubOctreeWithLeafs<FReal,\ CellClass,ContainerClass,LeafClass,CellAllocatorClass>}}\ \mbox{\hyperlink{class_f_sub_octree_with_leafs}{SubOctreeWithLeaf}};}
\DoxyCodeLine{00476\ }
\DoxyCodeLine{00477\ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree}{Parent}}**\ subleafs;\ \ \ \ \textcolor{comment}{//<\ Last\ levels\ is\ composed\ of\ suboctree}}
\DoxyCodeLine{00478\ }
\DoxyCodeLine{00479\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00480\ }
\DoxyCodeLine{00481\ \ \ \ \ \mbox{\hyperlink{class_f_sub_octree}{FSubOctree}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_sub_octree}{FSubOctree}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00482\ \ \ \ \ \mbox{\hyperlink{class_f_sub_octree}{FSubOctree}}\&\ operator=(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_sub_octree}{FSubOctree}}\&)\ =\ \textcolor{keyword}{delete};}
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00491\ \ \ \ \ \mbox{\hyperlink{class_f_sub_octree_ac61b3a29b894f83750e046b2a7ac7918}{FSubOctree}}(\mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree<FReal,\ CellClass,ContainerClass,LeafClass,CellAllocatorClass>}}*\ \textcolor{keyword}{const}\ inParent,\ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inIndexInParent,}
\DoxyCodeLine{00492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inSubOctreeHeight,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inSubOctreePosition)\ :}
\DoxyCodeLine{00493\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree}}<FReal,\ CellClass,ContainerClass,LeafClass,CellAllocatorClass>(inParent,\ inIndexInParent,\ inSubOctreeHeight,\ inSubOctreePosition,\ false)\ \{}
\DoxyCodeLine{00494\ }
\DoxyCodeLine{00495\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ cellsAtLeafLevel\ =\ 1\ <<\ (3\ *\ inSubOctreeHeight);}
\DoxyCodeLine{00496\ }
\DoxyCodeLine{00497\ \ \ \ \ \ \ \ \ this-\/>subleafs\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{Parent}}*[cellsAtLeafLevel];}
\DoxyCodeLine{00498\ \ \ \ \ \ \ \ \ FAssertLF(this-\/>subleafs,\ \textcolor{stringliteral}{"{}Allocation\ failled"{}});}
\DoxyCodeLine{00499\ }
\DoxyCodeLine{00500\ \ \ \ \ \ \ \ \ memset(subleafs,\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{class_f_abstract_sub_octree}{Parent}}**)\ *\ cellsAtLeafLevel);}
\DoxyCodeLine{00501\ \ \ \ \ \}}
\DoxyCodeLine{00502\ }
\DoxyCodeLine{00506\ \ \ \ \ \textcolor{keyword}{virtual}\ \mbox{\hyperlink{class_f_sub_octree_a1f11ef83b9f21ecd3f94d0c23b5039fd}{\string~FSubOctree}}()\{}
\DoxyCodeLine{00507\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\ \textcolor{keywordtype}{int}\ indexLeaf\ =\ Parent::leftLeafIndex\ ;\ indexLeaf\ <=\ Parent::rightLeafIndex\ ;\ ++indexLeaf\ )\{}
\DoxyCodeLine{00508\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this-\/>subleafs[indexLeaf])\ \textcolor{keyword}{delete}\ this-\/>subleafs[indexLeaf];}
\DoxyCodeLine{00509\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00510\ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ []\ this-\/>subleafs;}
\DoxyCodeLine{00511\ \ \ \ \ \}}
\DoxyCodeLine{00512\ }
\DoxyCodeLine{00513\ }
\DoxyCodeLine{00514\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}...\ Args>}
\DoxyCodeLine{00515\ \ \ \ \ \textcolor{keywordtype}{void}\ insert(\textcolor{keyword}{const}\ MortonIndex\ index,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_tree_coordinate}{FTreeCoordinate}}\&\ host,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inTreeHeight,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_point}{FPoint<FReal>}}\&\ inParticlePosition,}
\DoxyCodeLine{00516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ Args...\ args)\{}
\DoxyCodeLine{00517\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ the\ morton\ index\ at\ the\ bottom\ level\ of\ this\ sub\ octree}}
\DoxyCodeLine{00518\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ so\ we\ remove\ the\ right\ side}}
\DoxyCodeLine{00519\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ arrayIndex\ =\ \mbox{\hyperlink{class_f_abstract_sub_octree_a2e6f0fbaf44bffd7750bf8693616be37}{Parent::getLeafIndex}}(index,inTreeHeight);}
\DoxyCodeLine{00520\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Is\ there\ already\ a\ leaf?}}
\DoxyCodeLine{00521\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !this-\/>subleafs[arrayIndex]\ )\{}
\DoxyCodeLine{00522\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ create\ leaf\ sub\ octree}}
\DoxyCodeLine{00523\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ nextSubOctreePosition\ =\ this-\/>subOctreePosition\ +\ this-\/>subOctreeHeight;}
\DoxyCodeLine{00524\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ nextSubOctreeHeight\ =\ \mbox{\hyperlink{struct_f_math_a43635af3d44bb1868015681ce994df7b}{FMath::Min}}(inTreeHeight\ -\/\ nextSubOctreePosition,\ this-\/>subOctreeHeight);}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Next\ suboctree\ is\ a\ middle\ suboctree}}
\DoxyCodeLine{00527\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(inTreeHeight\ >\ nextSubOctreeHeight\ +\ nextSubOctreePosition)\{}
\DoxyCodeLine{00528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>subleafs[arrayIndex]\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_f_sub_octree}{FSubOctree}}(\textcolor{keyword}{this},\textcolor{keywordtype}{int}(arrayIndex),nextSubOctreeHeight,nextSubOctreePosition);}
\DoxyCodeLine{00529\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00530\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Or\ next\ suboctree\ contains\ the\ reail\ leaf!}}
\DoxyCodeLine{00531\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>subleafs[arrayIndex]\ =\ \textcolor{keyword}{new}\ SubOctreeWithLeaf(\textcolor{keyword}{this},\textcolor{keywordtype}{int}(arrayIndex),nextSubOctreeHeight,nextSubOctreePosition);}
\DoxyCodeLine{00533\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00534\ }
\DoxyCodeLine{00535\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_tree_coordinate}{FTreeCoordinate}}\ hostAtLevel(}
\DoxyCodeLine{00536\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ host.\mbox{\hyperlink{class_f_point_a58d3859160347552d6a4a94fbdf883c3}{getX}}()\ >>\ (inTreeHeight\ -\/\ nextSubOctreePosition\ ),}
\DoxyCodeLine{00537\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ host.\mbox{\hyperlink{class_f_point_ae4383512b9b8d216775b3fb92325cfc9}{getY}}()\ >>\ (inTreeHeight\ -\/\ nextSubOctreePosition\ ),}
\DoxyCodeLine{00538\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ host.\mbox{\hyperlink{class_f_point_a02208d4db50cbafe597adcbfb152b536}{getZ}}()\ >>\ (inTreeHeight\ -\/\ nextSubOctreePosition\ ));}
\DoxyCodeLine{00539\ }
\DoxyCodeLine{00540\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ inform\ parent\ class}}
\DoxyCodeLine{00541\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree_a13e167390ab62e103952b37e97e45338}{Parent::newLeafInserted}}(\ \textcolor{keywordtype}{int}(arrayIndex),\ index\ >>\ (3\ *\ (inTreeHeight-\/nextSubOctreePosition)\ ),\ hostAtLevel);}
\DoxyCodeLine{00542\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00543\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ask\ next\ suboctree\ to\ insert\ the\ particle}}
\DoxyCodeLine{00544\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this-\/>subleafs[arrayIndex]-\/>\mbox{\hyperlink{class_f_abstract_sub_octree_a421a3044968d532b28a3ac6c5ad61948}{isLeafPart}}())\{}
\DoxyCodeLine{00545\ \ \ \ \ \ \ \ \ \ \ \ \ ((SubOctreeWithLeaf*)this-\/>subleafs[arrayIndex])-\/>insert(\ index,\ host,\ inTreeHeight,\ inParticlePosition,\ args...\ );}
\DoxyCodeLine{00546\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00547\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00548\ \ \ \ \ \ \ \ \ \ \ \ \ ((\mbox{\hyperlink{class_f_sub_octree}{FSubOctree}}*)this-\/>subleafs[arrayIndex])-\/>insert(\ index,\ host,\ inTreeHeight,\ inParticlePosition,\ args...\ );}
\DoxyCodeLine{00549\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00550\ \ \ \ \ \}}
\DoxyCodeLine{00551\ }
\DoxyCodeLine{00552\ \ \ \ \ LeafClass*\ createLeaf(\textcolor{keyword}{const}\ MortonIndex\ index,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_tree_coordinate}{FTreeCoordinate}}\&\ host,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inTreeHeight)\{}
\DoxyCodeLine{00553\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ the\ morton\ index\ at\ the\ bottom\ level\ of\ this\ sub\ octree}}
\DoxyCodeLine{00554\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ so\ we\ remove\ the\ right\ side}}
\DoxyCodeLine{00555\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ arrayIndex\ =\ \mbox{\hyperlink{class_f_abstract_sub_octree_a2e6f0fbaf44bffd7750bf8693616be37}{Parent::getLeafIndex}}(index,inTreeHeight);}
\DoxyCodeLine{00556\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Is\ there\ already\ a\ leaf?}}
\DoxyCodeLine{00557\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ !this-\/>subleafs[arrayIndex]\ )\{}
\DoxyCodeLine{00558\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ create\ leaf\ sub\ octree}}
\DoxyCodeLine{00559\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ nextSubOctreePosition\ =\ this-\/>subOctreePosition\ +\ this-\/>subOctreeHeight;}
\DoxyCodeLine{00560\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ nextSubOctreeHeight\ =\ \mbox{\hyperlink{struct_f_math_a43635af3d44bb1868015681ce994df7b}{FMath::Min}}(inTreeHeight\ -\/\ nextSubOctreePosition,\ this-\/>subOctreeHeight);}
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00562\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Next\ suboctree\ is\ a\ middle\ suboctree}}
\DoxyCodeLine{00563\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(inTreeHeight\ >\ nextSubOctreeHeight\ +\ nextSubOctreePosition)\{}
\DoxyCodeLine{00564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>subleafs[arrayIndex]\ =\ \textcolor{keyword}{new}\ \mbox{\hyperlink{class_f_sub_octree}{FSubOctree}}(\textcolor{keyword}{this},\textcolor{keywordtype}{int}(arrayIndex),nextSubOctreeHeight,nextSubOctreePosition);}
\DoxyCodeLine{00565\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Or\ next\ suboctree\ contains\ the\ reail\ leaf!}}
\DoxyCodeLine{00567\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00568\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>subleafs[arrayIndex]\ =\ \textcolor{keyword}{new}\ SubOctreeWithLeaf(\textcolor{keyword}{this},\textcolor{keywordtype}{int}(arrayIndex),nextSubOctreeHeight,nextSubOctreePosition);}
\DoxyCodeLine{00569\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00570\ }
\DoxyCodeLine{00571\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_tree_coordinate}{FTreeCoordinate}}\ hostAtLevel(}
\DoxyCodeLine{00572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ host.\mbox{\hyperlink{class_f_point_a58d3859160347552d6a4a94fbdf883c3}{getX}}()\ >>\ (inTreeHeight\ -\/\ nextSubOctreePosition\ ),}
\DoxyCodeLine{00573\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ host.\mbox{\hyperlink{class_f_point_ae4383512b9b8d216775b3fb92325cfc9}{getY}}()\ >>\ (inTreeHeight\ -\/\ nextSubOctreePosition\ ),}
\DoxyCodeLine{00574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ host.\mbox{\hyperlink{class_f_point_a02208d4db50cbafe597adcbfb152b536}{getZ}}()\ >>\ (inTreeHeight\ -\/\ nextSubOctreePosition\ ));}
\DoxyCodeLine{00575\ }
\DoxyCodeLine{00576\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ need\ to\ inform\ parent\ class}}
\DoxyCodeLine{00577\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree_a13e167390ab62e103952b37e97e45338}{Parent::newLeafInserted}}(\ \textcolor{keywordtype}{int}(arrayIndex),\ index\ >>\ (3\ *\ (inTreeHeight-\/nextSubOctreePosition)\ ),\ hostAtLevel);}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00579\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ask\ next\ suboctree\ to\ insert\ the\ particle}}
\DoxyCodeLine{00580\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(this-\/>subleafs[arrayIndex]-\/>\mbox{\hyperlink{class_f_abstract_sub_octree_a421a3044968d532b28a3ac6c5ad61948}{isLeafPart}}())\{}
\DoxyCodeLine{00581\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((SubOctreeWithLeaf*)this-\/>subleafs[arrayIndex])-\/>createLeaf(\ index,\ host,\ inTreeHeight\ );}
\DoxyCodeLine{00582\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00583\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00584\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ ((\mbox{\hyperlink{class_f_sub_octree}{FSubOctree}}*)this-\/>subleafs[arrayIndex])-\/>createLeaf(\ index,\ host,\ inTreeHeight\ );}
\DoxyCodeLine{00585\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00586\ \ \ \ \ \}}
\DoxyCodeLine{00587\ }
\DoxyCodeLine{00591\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_sub_octree_a14a964b5d0612bf643941e025202e26a}{removeLeaf}}(\textcolor{keyword}{const}\ MortonIndex\ index,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ inTreeHeight)\ \{}
\DoxyCodeLine{00592\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ the\ morton\ index\ for\ the\ leaf\ level}}
\DoxyCodeLine{00593\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ arrayIndex\ =\ \mbox{\hyperlink{class_f_abstract_sub_octree_a2e6f0fbaf44bffd7750bf8693616be37}{Parent::getLeafIndex}}(index,inTreeHeight);}
\DoxyCodeLine{00594\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ this-\/>subleafs[arrayIndex]-\/>\mbox{\hyperlink{class_f_sub_octree_a14a964b5d0612bf643941e025202e26a}{removeLeaf}}(index,\ inTreeHeight)\ )\{}
\DoxyCodeLine{00595\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ remove\ container}}
\DoxyCodeLine{00596\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{delete}\ this-\/>subleafs[arrayIndex];}
\DoxyCodeLine{00597\ \ \ \ \ \ \ \ \ \ \ \ \ this-\/>subleafs[arrayIndex]\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00598\ }
\DoxyCodeLine{00599\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{class_f_abstract_sub_octree_a0a25af8c62187c430a4360f3e1465159}{Parent::removeCellsFromLeaf}}(\ \textcolor{keywordtype}{int}(arrayIndex)\ );}
\DoxyCodeLine{00600\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00602\ \ \ \ \ \}}
\DoxyCodeLine{00603\ }
\DoxyCodeLine{00607\ \ \ \ \ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree<FReal,CellClass,ContainerClass,LeafClass,CellAllocatorClass>}}*\ \mbox{\hyperlink{class_f_sub_octree_ad5afb7e4ad24e4472a09ee1df22384bd}{leafs}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ index)\ \{}
\DoxyCodeLine{00608\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>subleafs[index];}
\DoxyCodeLine{00609\ \ \ \ \ \}}
\DoxyCodeLine{00610\ }
\DoxyCodeLine{00614\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_f_abstract_sub_octree}{FAbstractSubOctree<FReal,CellClass,ContainerClass,LeafClass,CellAllocatorClass>}}*\ \mbox{\hyperlink{class_f_sub_octree_a6813db8f49de4e2a96451ab07763d4da}{leafs}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ index)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00615\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>subleafs[index];}
\DoxyCodeLine{00616\ \ \ \ \ \}}
\DoxyCodeLine{00617\ \};}
\DoxyCodeLine{00618\ }
\DoxyCodeLine{00619\ }
\DoxyCodeLine{00620\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//FSUBOCTREE\_HPP}}

\end{DoxyCode}
