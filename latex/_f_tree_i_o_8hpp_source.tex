\doxysection{FTree\+IO.\+hpp}
\hypertarget{_f_tree_i_o_8hpp_source}{}\label{_f_tree_i_o_8hpp_source}\index{third\_party/ScalFMM/include/ScalFMM/Files/FTreeIO.hpp@{third\_party/ScalFMM/include/ScalFMM/Files/FTreeIO.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ See\ LICENCE\ file\ at\ project\ root}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#ifndef\ FTREEIO\_HPP}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#define\ FTREEIO\_HPP}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <fstream>}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}Utils/FPoint.hpp"{}}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ "{}Containers/FBufferReader.hpp"{}}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ "{}Containers/FBufferWriter.hpp"{}}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ "{}Utils/FPoint.hpp"{}}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ FReal>}
\DoxyCodeLine{00026\ \textcolor{keyword}{class\ }\mbox{\hyperlink{class_f_tree_i_o}{FTreeIO}}\{}
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{enum}\ TargetSourceDiff\{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ TsmUndef,}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ TsmUsed,}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ TsmUnused}
\DoxyCodeLine{00032\ \ \ \ \ \};}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ OctreeClass,\ \textcolor{keyword}{class}\ CellClass,\ \textcolor{keyword}{class}\ LeafClass,\ \textcolor{keyword}{class}\ ContainerClass\ >}
\DoxyCodeLine{00037\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_tree_i_o_aeae3b53fd9aab0d78cc647634f5dbf91}{Save}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ filename[],\ OctreeClass\&\ tree)\{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ std::ofstream\ file(filename,\ std::ofstream::binary\ |\ std::ofstream::out\ );}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_buffer_writer}{FBufferWriter}}\ buffer;}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!file.good())\{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00044\ }
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{size\_t}\ sizeof\_freal\ =\ \textcolor{keyword}{sizeof}(FReal);}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ file.\mbox{\hyperlink{class_f_buffer_writer_a952d0248e89c49ebae8d7ffca798cfa9}{write}}((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&sizeof\_freal,\ \textcolor{keyword}{sizeof}(size\_t));}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ height\ =\ tree.getHeight();}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&height,\ \textcolor{keyword}{sizeof}(int));}
\DoxyCodeLine{00050\ }
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ subHeight\ =\ tree.getSubHeight();}
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&subHeight,\ \textcolor{keyword}{sizeof}(int));}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ FReal\ width\ =\ tree.getBoxWidth();}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&width,\ \textcolor{keyword}{sizeof}(FReal));}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&tree.getBoxCenter(),\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{class_f_point}{FPoint<FReal>}}));}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ OctreeClass::Iterator\ octreeIterator(\&tree);}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nbLeaf\ =\ 0;}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::ofstream::pos\_type\ posNbLeaf\ =\ file.tellp();}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&nbLeaf,\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{int}));}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ octreeIterator.gotoBottomLeft();}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{bool}\ useTargetSource\ =\ (octreeIterator.getCurrentListSrc()\ !=\ octreeIterator.getCurrentListTargets());}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ useTargetSource\ )\{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TargetSourceDiff\ tsm\ =\ TsmUsed;}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&tsm,\textcolor{keyword}{sizeof}(tsm));}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ mindex\ =\ octreeIterator.getCurrentGlobalIndex();}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&mindex,\textcolor{keyword}{sizeof}(mindex));}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer.\mbox{\hyperlink{class_f_buffer_writer_af44d4b83026115a302e91634d5acd757}{reset}}();}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ octreeIterator.getCurrentListSrc()-\/>save(buffer);}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ octreeIterator.getCurrentListTargets()-\/>save(buffer);}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ FSize\ sizeOfLeaf\ =\ buffer.\mbox{\hyperlink{class_f_buffer_writer_a98858aad316cb7af567e08c8d01f3c19}{getSize}}();}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\ \&sizeOfLeaf,\ \textcolor{keyword}{sizeof}(FSize));}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write(buffer.\mbox{\hyperlink{class_f_buffer_writer_a6a9be83a2405c1b86f9ad3d9481e0113}{data}}(),\ buffer.\mbox{\hyperlink{class_f_buffer_writer_a98858aad316cb7af567e08c8d01f3c19}{getSize}}());}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++nbLeaf;}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(octreeIterator.moveRight());}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ TargetSourceDiff\ tsm\ =\ TsmUnused;}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&tsm,\textcolor{keyword}{sizeof}(tsm));}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ mindex\ =\ octreeIterator.getCurrentGlobalIndex();}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&mindex,\textcolor{keyword}{sizeof}(mindex));}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer.\mbox{\hyperlink{class_f_buffer_writer_af44d4b83026115a302e91634d5acd757}{reset}}();}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ octreeIterator.getCurrentListSrc()-\/>save(buffer);}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ FSize\ sizeOfLeaf\ =\ buffer.\mbox{\hyperlink{class_f_buffer_writer_a98858aad316cb7af567e08c8d01f3c19}{getSize}}();}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\ \&sizeOfLeaf,\ \textcolor{keyword}{sizeof}(FSize));}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write(buffer.\mbox{\hyperlink{class_f_buffer_writer_a6a9be83a2405c1b86f9ad3d9481e0113}{data}}(),\ buffer.\mbox{\hyperlink{class_f_buffer_writer_a98858aad316cb7af567e08c8d01f3c19}{getSize}}());}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++nbLeaf;}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(octreeIterator.moveRight());}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::ofstream::pos\_type\ currentPos\ =\ file.tellp();}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \ \ \ \ file.seekp(posNbLeaf);}
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&nbLeaf,\textcolor{keyword}{sizeof}(int));}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \ \ \ \ file.seekp(currentPos);}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00110\ }
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Start\ from\ leal\ level\ -\/\ 1}}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ OctreeClass::Iterator\ octreeIterator(\&tree);}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ octreeIterator.gotoBottomLeft();}
\DoxyCodeLine{00114\ }
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ OctreeClass::Iterator\ avoidGotoLeftIterator(octreeIterator);}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ for\ each\ levels}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ idxLevel\ =\ tree.getHeight()\ -\/\ 1\ ;\ idxLevel\ >\ 1\ ;\ -\/-\/idxLevel\ )\{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nbCells\ =\ 0;}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::ofstream::pos\_type\ posNbCells\ =\ file.tellp();}
\DoxyCodeLine{00121\ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&nbCells,\textcolor{keyword}{sizeof}(int));}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ MortonIndex\ mindex\ =\ octreeIterator.getCurrentGlobalIndex();}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&mindex,\textcolor{keyword}{sizeof}(MortonIndex));}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer.\mbox{\hyperlink{class_f_buffer_writer_af44d4b83026115a302e91634d5acd757}{reset}}();}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ octreeIterator.getCurrentCell()-\/>save(buffer);}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ FSize\ sizeOfCell\ =\ buffer.\mbox{\hyperlink{class_f_buffer_writer_a98858aad316cb7af567e08c8d01f3c19}{getSize}}();}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\ \&sizeOfCell,\ \textcolor{keyword}{sizeof}(FSize));}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.write(buffer.\mbox{\hyperlink{class_f_buffer_writer_a6a9be83a2405c1b86f9ad3d9481e0113}{data}}(),\ buffer.\mbox{\hyperlink{class_f_buffer_writer_a98858aad316cb7af567e08c8d01f3c19}{getSize}}());}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ++nbCells;}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(octreeIterator.moveRight());}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ std::ofstream::pos\_type\ currentPos\ =\ file.tellp();}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ file.seekp(posNbCells);}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \ \ \ \ file.write((\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*)\&nbCells,\textcolor{keyword}{sizeof}(int));}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ \ \ \ \ file.seekp(currentPos);}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \ \ \ \ avoidGotoLeftIterator.moveUp();}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \ \ \ \ octreeIterator\ =\ avoidGotoLeftIterator;\textcolor{comment}{//\ equal\ octreeIterator.moveUp();\ octreeIterator.gotoLeft();}}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00144\ }
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ file.flush();}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ file.close();}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00150\ \ \ \ \ \}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ }
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{class}\ OctreeClass,\ \textcolor{keyword}{class}\ CellClass,\ \textcolor{keyword}{class}\ LeafClass,\ \textcolor{keyword}{class}\ ContainerClass\ \ >}
\DoxyCodeLine{00155\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_f_tree_i_o_a1cb2f1ebb8c80ba0203ec1d7e2eaf3af}{Load}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ filename[],\ OctreeClass\&\ tree)\{}
\DoxyCodeLine{00156\ \ \ \ \ \ \ \ \ std::ifstream\ file(filename,\ std::ifstream::binary\ |\ std::ifstream::in\ );}
\DoxyCodeLine{00157\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_buffer_reader}{FBufferReader}}\ buffer;}
\DoxyCodeLine{00158\ }
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(!file.good())\{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ sizeof\_freal\ =\ 0;}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&sizeof\_freal,\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{size\_t}));}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ sizeof\_freal\ !=\ \textcolor{keyword}{sizeof}(FReal))\{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}[Loader]\ Error\ Freal\ do\ not\ coincide\ with\ file\ type:\(\backslash\)n"{}};}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}[Loader]\ In\ file\ :\ "{}}\ <<\ sizeof\_freal\ <<\ \textcolor{stringliteral}{"{}\ Real\ :\ "{}}\ <<\ \textcolor{keyword}{sizeof}(FReal)\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ treeHeight\ =\ 0;}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&treeHeight,\ \textcolor{keyword}{sizeof}(int));}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ treeSubHeight\ =\ 0;}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&treeSubHeight,\ \textcolor{keyword}{sizeof}(int));}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ FReal\ boxWidth\ =\ 0;}
\DoxyCodeLine{00176\ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&boxWidth,\ \textcolor{keyword}{sizeof}(FReal));}
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_f_point}{FPoint<FReal>}}\ center;}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&center,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{class_f_point}{FPoint<FReal>}}));}
\DoxyCodeLine{00179\ }
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ tree.\string~OctreeClass();}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \textcolor{keyword}{new}\ (\&tree)\ OctreeClass(treeHeight,treeSubHeight,boxWidth,center);}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nbLeaf\ =\ 0;}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&nbLeaf,\ \textcolor{keyword}{sizeof}(int));}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \ \ \ \ TargetSourceDiff\ tsm\ =\ TsmUndef;}
\DoxyCodeLine{00188\ \ \ \ \ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&tsm,\textcolor{keyword}{sizeof}(tsm));}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ idxLeaf\ =\ 0\ ;\ idxLeaf\ <\ nbLeaf\ ;\ ++idxLeaf)\{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MortonIndex\ mindex\ =\ 0;}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&mindex,\ \textcolor{keyword}{sizeof}(mindex));}
\DoxyCodeLine{00193\ }
\DoxyCodeLine{00194\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FSize\ sizeOfLeaf\ =\ 0;}
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&sizeOfLeaf,\ \textcolor{keyword}{sizeof}(FSize));}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer.\mbox{\hyperlink{class_f_buffer_reader_af928c1bd4fc1b2ec84d2749ebe933e57}{seek}}(0);}
\DoxyCodeLine{00198\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer.\mbox{\hyperlink{class_f_buffer_reader_ad987d238621b29a501b0b16477fd9620}{reserve}}(sizeOfLeaf);}
\DoxyCodeLine{00199\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)buffer.\mbox{\hyperlink{class_f_buffer_reader_a9a48e983f6c37e62c8ec5ecb544d1e5c}{data}}(),\ sizeOfLeaf);}
\DoxyCodeLine{00200\ }
\DoxyCodeLine{00201\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ LeafClass*\textcolor{keyword}{const}\ leaf\ =\ tree.createLeaf(mindex);}
\DoxyCodeLine{00202\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ leaf-\/>getSrc()-\/>restore(buffer);}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(\ tsm\ ==\ TsmUsed\ )\{}
\DoxyCodeLine{00205\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ leaf-\/>getTargets()-\/>restore(buffer);}
\DoxyCodeLine{00206\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00207\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00210\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Start\ from\ leal\ level\ -\/\ 1}}
\DoxyCodeLine{00211\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ OctreeClass::Iterator\ octreeIterator(\&tree);}
\DoxyCodeLine{00212\ \ \ \ \ \ \ \ \ octreeIterator.gotoBottomLeft();}
\DoxyCodeLine{00213\ }
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keyword}{typename}\ OctreeClass::Iterator\ avoidGotoLeftIterator(octreeIterator);}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00216\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ for\ each\ levels}}
\DoxyCodeLine{00217\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ idxLevel\ =\ tree.getHeight()\ -\/\ 1\ ;\ idxLevel\ >\ 1\ ;\ -\/-\/idxLevel\ )\{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ nbCells\ =\ 0;}
\DoxyCodeLine{00219\ \ \ \ \ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&nbCells,\ \textcolor{keyword}{sizeof}(int));}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{do}\{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ MortonIndex\ mindex;}
\DoxyCodeLine{00223\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&mindex,\ \textcolor{keyword}{sizeof}(MortonIndex));}
\DoxyCodeLine{00224\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(mindex\ !=\ octreeIterator.getCurrentGlobalIndex())\{}
\DoxyCodeLine{00225\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}[Loader]\ Error\ indexes\ are\ different\(\backslash\)n"{}};}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00228\ }
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ FSize\ sizeOfCell\ =\ 0;}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)\&sizeOfCell,\ \textcolor{keyword}{sizeof}(FSize));}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer.\mbox{\hyperlink{class_f_buffer_reader_af928c1bd4fc1b2ec84d2749ebe933e57}{seek}}(0);}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ buffer.\mbox{\hyperlink{class_f_buffer_reader_ad987d238621b29a501b0b16477fd9620}{reserve}}(sizeOfCell);}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ file.read((\textcolor{keywordtype}{char}*)buffer.\mbox{\hyperlink{class_f_buffer_reader_a9a48e983f6c37e62c8ec5ecb544d1e5c}{data}}(),\ sizeOfCell);}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ octreeIterator.getCurrentCell()-\/>restore(buffer);}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ -\/-\/nbCells;}
\DoxyCodeLine{00239\ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{while}(octreeIterator.moveRight());}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(nbCells\ !=\ 0)\{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::cerr\ <<\ \textcolor{stringliteral}{"{}[Loader]\ Wrong\ number\ of\ cells\ at\ level\ "{}}\ <<\ idxLevel\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{00243\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00244\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \ \ \ \ avoidGotoLeftIterator.moveUp();}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \ \ \ \ octreeIterator\ =\ avoidGotoLeftIterator;}
\DoxyCodeLine{00248\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ file.close();}
\DoxyCodeLine{00251\ }
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00253\ \ \ \ \ \}}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \};}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ FTREEIO\_HPP}}

\end{DoxyCode}
