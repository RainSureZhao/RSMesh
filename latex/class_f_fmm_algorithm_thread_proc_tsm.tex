\doxysection{FFmm\+Algorithm\+Thread\+Proc\+Tsm\texorpdfstring{$<$}{<} Octree\+Class, Cell\+Class, Container\+Class, Kernel\+Class, Leaf\+Class, P2\+PExclusion\+Class \texorpdfstring{$>$}{>} 模板类 参考}
\hypertarget{class_f_fmm_algorithm_thread_proc_tsm}{}\label{class_f_fmm_algorithm_thread_proc_tsm}\index{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}}


{\ttfamily \#include $<$FFmm\+Algorithm\+Thread\+Proc\+Tsm.\+hpp$>$}

类 FFmm\+Algorithm\+Thread\+Proc\+Tsm\texorpdfstring{$<$}{<} Octree\+Class, Cell\+Class, Container\+Class, Kernel\+Class, Leaf\+Class, P2\+PExclusion\+Class \texorpdfstring{$>$}{>} 继承关系图\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=0.793201cm]{class_f_fmm_algorithm_thread_proc_tsm}
\end{center}
\end{figure}
\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_f_fmm_algorithm_thread_proc_tsm_1_1_leaf_data}{Leaf\+Data}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public 成员函数}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_a23d048184d78585ad926ce7ea3d8810d}\label{class_f_fmm_algorithm_thread_proc_tsm_a23d048184d78585ad926ce7ea3d8810d} 
Interval \& {\bfseries get\+Working\+Interval} (int level)
\begin{DoxyCompactList}\small\item\em Get current process interval at given {\itshape level} \end{DoxyCompactList}\item 
\Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_ad506d2c891afe9f9b256272e4b71de16}\label{class_f_fmm_algorithm_thread_proc_tsm_ad506d2c891afe9f9b256272e4b71de16} 
bool {\bfseries has\+Work\+At\+Level} (int level)
\begin{DoxyCompactList}\small\item\em Does the current process has some work at this level ? \end{DoxyCompactList}\item 
\mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm_a17c47b9de93f32dc9ca9ef66c6fb8774}{FFmm\+Algorithm\+Thread\+Proc\+Tsm}} (const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&in\+Comm, Octree\+Class \texorpdfstring{$\ast$}{*}const in\+Tree, Kernel\+Class \texorpdfstring{$\ast$}{*}const in\+Kernels, const int in\+User\+Chunk\+Size=10, const int in\+Leaf\+Level\+Seperation\+Criteria=1)
\begin{DoxyCompactList}\small\item\em Constructor \end{DoxyCompactList}\item 
\Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_a93fd2b9810ba4f095fb8ba2372ccbba4}\label{class_f_fmm_algorithm_thread_proc_tsm_a93fd2b9810ba4f095fb8ba2372ccbba4} 
virtual {\bfseries \texorpdfstring{$\sim$}{\string~}\+FFmm\+Algorithm\+Thread\+Proc\+Tsm} ()
\begin{DoxyCompactList}\small\item\em Default destructor \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数 继承自 \mbox{\hyperlink{class_f_abstract_algorithm}{FAbstract\+Algorithm}}}
\begin{DoxyCompactItemize}
\item 
virtual void {\bfseries execute} (const int in\+Upper\+Working\+Level, const int in\+Lower\+Working\+Level) final
\begin{DoxyCompactList}\small\item\em Execute the whole fmm for given levels. \end{DoxyCompactList}\item 
virtual void {\bfseries execute} () final
\begin{DoxyCompactList}\small\item\em Execute the whole fmm. \end{DoxyCompactList}\item 
virtual void {\bfseries execute} (const unsigned operations\+To\+Proceed, const int in\+Upper\+Working\+Level, const int in\+Lower\+Working\+Level) final
\begin{DoxyCompactList}\small\item\em Execute only some FMM operations for given levels. \end{DoxyCompactList}\item 
virtual void {\bfseries execute} (const unsigned operations\+To\+Proceed) final
\begin{DoxyCompactList}\small\item\em Execute only some steps. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public 成员函数 继承自 \mbox{\hyperlink{class_f_algorithm_timers}{FAlgorithm\+Timers}}}
\begin{DoxyCompactItemize}
\item 
{\bfseries FAlgorithm\+Timers} ()=default
\begin{DoxyCompactList}\small\item\em Constructor\+: resets all timers \end{DoxyCompactList}\item 
{\bfseries FAlgorithm\+Timers} (const \mbox{\hyperlink{class_f_algorithm_timers}{FAlgorithm\+Timers}} \&)=default
\begin{DoxyCompactList}\small\item\em Default copy contructor \end{DoxyCompactList}\item 
{\bfseries FAlgorithm\+Timers} (\mbox{\hyperlink{class_f_algorithm_timers}{FAlgorithm\+Timers}} \&\&)=default
\begin{DoxyCompactList}\small\item\em Default move contructor \end{DoxyCompactList}\item 
double {\bfseries get\+Time} (std\+::string Timer\+Name) const
\begin{DoxyCompactList}\small\item\em Elapsed time between last \doxylink{class_f_tic_ac0e070e65af128fbe5af711e51033b0a}{FTic\+::tic()} and \doxylink{class_f_tic_a3efff71f7c95acd38451bfab08fa4583}{FTic\+::tac()} for given timer. \end{DoxyCompactList}\item 
double {\bfseries get\+Cumulated\+Time} (std\+::string Timer\+Name) const
\begin{DoxyCompactList}\small\item\em Cumulated time between all \doxylink{class_f_tic_ac0e070e65af128fbe5af711e51033b0a}{FTic\+::tic()} and \doxylink{class_f_tic_a3efff71f7c95acd38451bfab08fa4583}{FTic\+::tac()} for given timer. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Protected 成员函数}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm_a25090d1ef02dd57f63bc97b1c2567a48}{execute\+Core}} (const unsigned operations\+To\+Proceed) override
\item 
void \mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm_a3dd87306f6f42c478cb743715b9ced20}{bottom\+Pass}} ()
\item 
void \mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm_a32e0dd32874783a3213f112bad63c9c7}{upward\+Pass}} ()
\item 
\Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_a6c3fe37d97ea6c5edcf963b0ff61bc7d}\label{class_f_fmm_algorithm_thread_proc_tsm_a6c3fe37d97ea6c5edcf963b0ff61bc7d} 
void {\bfseries transfer\+Pass} ()
\item 
\Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_a4d70180177f45e6c5eb8e5466b6107fc}\label{class_f_fmm_algorithm_thread_proc_tsm_a4d70180177f45e6c5eb8e5466b6107fc} 
void {\bfseries downard\+Pass} ()
\item 
void \mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm_aacf2191db0cbdca1620a57152239e79c}{direct\+Pass}} (const bool p2p\+Enabled, const bool l2p\+Enabled)
\end{DoxyCompactItemize}
\doxysubsection*{Protected 成员函数 继承自 \mbox{\hyperlink{class_f_abstract_algorithm}{FAbstract\+Algorithm}}}
\begin{DoxyCompactItemize}
\item 
void {\bfseries set\+Nb\+Levels\+In\+Tree} (const int in\+Nb\+Levels\+In\+Tree)
\item 
void {\bfseries validate\+Levels} () const
\end{DoxyCompactItemize}
\doxysubsubsection*{额外继承的成员函数}
\doxysubsection*{Public 类型 继承自 \mbox{\hyperlink{class_f_algorithm_timers}{FAlgorithm\+Timers}}}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{class_f_algorithm_timers_a476fc8777d5054203af69ac36b8026af}\label{class_f_algorithm_timers_a476fc8777d5054203af69ac36b8026af} 
enum \{ {\bfseries nb\+Timers} = 9
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Public 属性 继承自 \mbox{\hyperlink{class_f_algorithm_timers}{FAlgorithm\+Timers}}}
\begin{DoxyCompactItemize}
\item 
FTimer\+Map {\bfseries Timers}
\begin{DoxyCompactList}\small\item\em Timers \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{静态 Public 属性 继承自 \mbox{\hyperlink{class_f_algorithm_timers}{FAlgorithm\+Timers}}}
\begin{DoxyCompactItemize}
\item 
static constexpr const char \texorpdfstring{$\ast$}{*} {\bfseries P2\+MTimer} = "{}P2\+M"{}
\item 
static constexpr const char \texorpdfstring{$\ast$}{*} {\bfseries M2\+MTimer} = "{}M2\+M"{}
\item 
static constexpr const char \texorpdfstring{$\ast$}{*} {\bfseries M2\+LTimer} = "{}M2\+L"{}
\item 
static constexpr const char \texorpdfstring{$\ast$}{*} {\bfseries L2\+LTimer} = "{}L2\+L"{}
\item 
static constexpr const char \texorpdfstring{$\ast$}{*} {\bfseries L2\+PTimer} = "{}L2\+P"{}
\item 
static constexpr const char \texorpdfstring{$\ast$}{*} {\bfseries P2\+PTimer} = "{}P2\+P"{}
\item 
static constexpr const char \texorpdfstring{$\ast$}{*} {\bfseries M2\+PTimer} = "{}M2\+P"{}
\item 
static constexpr const char \texorpdfstring{$\ast$}{*} {\bfseries P2\+LTimer} = "{}P2\+L"{}
\item 
static constexpr const char \texorpdfstring{$\ast$}{*} {\bfseries Near\+Timer} = "{}Near"{}
\end{DoxyCompactItemize}
\doxysubsection*{Protected 属性 继承自 \mbox{\hyperlink{class_f_abstract_algorithm}{FAbstract\+Algorithm}}}
\begin{DoxyCompactItemize}
\item 
int {\bfseries upper\+Working\+Level}
\begin{DoxyCompactList}\small\item\em Where to start the work \end{DoxyCompactList}\item 
int {\bfseries lower\+Working\+Level}
\begin{DoxyCompactList}\small\item\em Where to end the work (exclusive) \end{DoxyCompactList}\item 
int {\bfseries nb\+Levels\+In\+Tree}
\begin{DoxyCompactList}\small\item\em Height of the tree \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$class Octree\+Class, class Cell\+Class, class Container\+Class, class Kernel\+Class, class Leaf\+Class, class P2\+PExclusion\+Class = FP2\+PMiddle\+Exclusion$>$\newline
class FFmm\+Algorithm\+Thread\+Proc\+Tsm$<$ Octree\+Class, Cell\+Class, Container\+Class, Kernel\+Class, Leaf\+Class, P2\+PExclusion\+Class $>$}
\begin{DoxyAuthor}{作者}

\end{DoxyAuthor}
Please read the license

This class is a threaded FMM algorithm distributed using MPI. It iterates on a tree and call the kernels with good arguments. It uses the inspector -\/ executor model \+: iterates on the tree and builds an array to work in parallel on this array

This class does not free pointers given in arguements.

Threaded \& based on the inspector-\/executor model \begin{DoxyVerb}schedule(runtime) export OMP_NUM_THREADS=2
export OMPI_CXX=`which g++-4.4`
mpirun -np 2 valgrind --suppressions=/usr/share/openmpi/openmpi-valgrind.supp
   --tool=memcheck --leak-check=yes --show-reachable=yes --num-callers=20
   --track-fds=yes ./Tests/testFmmAlgorithmProcTsm ../Data/testLoaderSmall.fma.tmp
\end{DoxyVerb}
 

\doxysubsection{构造及析构函数说明}
\Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_a17c47b9de93f32dc9ca9ef66c6fb8774}\label{class_f_fmm_algorithm_thread_proc_tsm_a17c47b9de93f32dc9ca9ef66c6fb8774} 
\index{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}!FFmmAlgorithmThreadProcTsm@{FFmmAlgorithmThreadProcTsm}}
\index{FFmmAlgorithmThreadProcTsm@{FFmmAlgorithmThreadProcTsm}!FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}}
\doxysubsubsection{\texorpdfstring{FFmmAlgorithmThreadProcTsm()}{FFmmAlgorithmThreadProcTsm()}}
{\footnotesize\ttfamily template$<$class Octree\+Class , class Cell\+Class , class Container\+Class , class Kernel\+Class , class Leaf\+Class , class P2\+PExclusion\+Class  = FP2\+PMiddle\+Exclusion$>$ \\
\mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm}{FFmm\+Algorithm\+Thread\+Proc\+Tsm}}$<$ Octree\+Class, Cell\+Class, Container\+Class, Kernel\+Class, Leaf\+Class, P2\+PExclusion\+Class $>$\mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm}{\+::\+FFmm\+Algorithm\+Thread\+Proc\+Tsm}} (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&}]{in\+Comm,  }\item[{Octree\+Class \texorpdfstring{$\ast$}{*}const}]{in\+Tree,  }\item[{Kernel\+Class \texorpdfstring{$\ast$}{*}const}]{in\+Kernels,  }\item[{const int}]{in\+User\+Chunk\+Size = {\ttfamily 10},  }\item[{const int}]{in\+Leaf\+Level\+Seperation\+Criteria = {\ttfamily 1} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructor 


\begin{DoxyParams}{参数}
{\em in\+Tree} & the octree to work on \\
\hline
{\em in\+Kernels} & the kernels to call\\
\hline
\end{DoxyParams}
An assert is launched if one of the arguments is null 

\doxysubsection{成员函数说明}
\Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_a3dd87306f6f42c478cb743715b9ced20}\label{class_f_fmm_algorithm_thread_proc_tsm_a3dd87306f6f42c478cb743715b9ced20} 
\index{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}!bottomPass@{bottomPass}}
\index{bottomPass@{bottomPass}!FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}}
\doxysubsubsection{\texorpdfstring{bottomPass()}{bottomPass()}}
{\footnotesize\ttfamily template$<$class Octree\+Class , class Cell\+Class , class Container\+Class , class Kernel\+Class , class Leaf\+Class , class P2\+PExclusion\+Class  = FP2\+PMiddle\+Exclusion$>$ \\
void \mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm}{FFmm\+Algorithm\+Thread\+Proc\+Tsm}}$<$ Octree\+Class, Cell\+Class, Container\+Class, Kernel\+Class, Leaf\+Class, P2\+PExclusion\+Class $>$\+::bottom\+Pass (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}

P2M Bottom Pass No communication are involved in the P2M. It is similar to multi threaded version. We traverse alle the octree to set if cells are sources or targets \Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_aacf2191db0cbdca1620a57152239e79c}\label{class_f_fmm_algorithm_thread_proc_tsm_aacf2191db0cbdca1620a57152239e79c} 
\index{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}!directPass@{directPass}}
\index{directPass@{directPass}!FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}}
\doxysubsubsection{\texorpdfstring{directPass()}{directPass()}}
{\footnotesize\ttfamily template$<$class Octree\+Class , class Cell\+Class , class Container\+Class , class Kernel\+Class , class Leaf\+Class , class P2\+PExclusion\+Class  = FP2\+PMiddle\+Exclusion$>$ \\
void \mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm}{FFmm\+Algorithm\+Thread\+Proc\+Tsm}}$<$ Octree\+Class, Cell\+Class, Container\+Class, Kernel\+Class, Leaf\+Class, P2\+PExclusion\+Class $>$\+::direct\+Pass (\begin{DoxyParamCaption}\item[{const bool}]{p2p\+Enabled,  }\item[{const bool}]{l2p\+Enabled }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}

P2P \Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_a25090d1ef02dd57f63bc97b1c2567a48}\label{class_f_fmm_algorithm_thread_proc_tsm_a25090d1ef02dd57f63bc97b1c2567a48} 
\index{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}!executeCore@{executeCore}}
\index{executeCore@{executeCore}!FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}}
\doxysubsubsection{\texorpdfstring{executeCore()}{executeCore()}}
{\footnotesize\ttfamily template$<$class Octree\+Class , class Cell\+Class , class Container\+Class , class Kernel\+Class , class Leaf\+Class , class P2\+PExclusion\+Class  = FP2\+PMiddle\+Exclusion$>$ \\
void \mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm}{FFmm\+Algorithm\+Thread\+Proc\+Tsm}}$<$ Octree\+Class, Cell\+Class, Container\+Class, Kernel\+Class, Leaf\+Class, P2\+PExclusion\+Class $>$\+::execute\+Core (\begin{DoxyParamCaption}\item[{const unsigned}]{operations\+To\+Proceed }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [override]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}

To execute the fmm algorithm Call this function to run the complete algorithm 

实现了 \mbox{\hyperlink{class_f_abstract_algorithm}{FAbstract\+Algorithm}}.

\Hypertarget{class_f_fmm_algorithm_thread_proc_tsm_a32e0dd32874783a3213f112bad63c9c7}\label{class_f_fmm_algorithm_thread_proc_tsm_a32e0dd32874783a3213f112bad63c9c7} 
\index{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}!upwardPass@{upwardPass}}
\index{upwardPass@{upwardPass}!FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$@{FFmmAlgorithmThreadProcTsm$<$ OctreeClass, CellClass, ContainerClass, KernelClass, LeafClass, P2PExclusionClass $>$}}
\doxysubsubsection{\texorpdfstring{upwardPass()}{upwardPass()}}
{\footnotesize\ttfamily template$<$class Octree\+Class , class Cell\+Class , class Container\+Class , class Kernel\+Class , class Leaf\+Class , class P2\+PExclusion\+Class  = FP2\+PMiddle\+Exclusion$>$ \\
void \mbox{\hyperlink{class_f_fmm_algorithm_thread_proc_tsm}{FFmm\+Algorithm\+Thread\+Proc\+Tsm}}$<$ Octree\+Class, Cell\+Class, Container\+Class, Kernel\+Class, Leaf\+Class, P2\+PExclusion\+Class $>$\+::upward\+Pass (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}}

M2M 

该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
third\+\_\+party/\+Scal\+FMM/include/\+Scal\+FMM/\+Core/FFmm\+Algorithm\+Thread\+Proc\+Tsm.\+hpp\end{DoxyCompactItemize}
