\doxysection{FMpi\+Tree\+Builder\texorpdfstring{$<$}{<} FReal, Particle\+Class \texorpdfstring{$>$}{>} 模板类 参考}
\hypertarget{class_f_mpi_tree_builder}{}\label{class_f_mpi_tree_builder}\index{FMpiTreeBuilder$<$ FReal, ParticleClass $>$@{FMpiTreeBuilder$<$ FReal, ParticleClass $>$}}


{\ttfamily \#include $<$FMpi\+Tree\+Builder.\+hpp$>$}

\doxysubsubsection*{类}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_f_mpi_tree_builder_1_1_indexed_particle}{Indexed\+Particle}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Public 类型}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{class_f_mpi_tree_builder_a0b32592a0b936d3dde76557cb37d3b2b}{Sorting\+Type}} \{ {\bfseries Quick\+Sort}
, {\bfseries Bitonic\+Sort}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{静态 Public 成员函数}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$class Loader\+Class $>$ }\\static void \mbox{\hyperlink{class_f_mpi_tree_builder_aa63afe2b99f0a7ff242134bef377758b}{Get\+Sorted\+Particles\+From\+Loader}} (const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&communicator, Loader\+Class \&loader, const \mbox{\hyperlink{class_f_mpi_tree_builder_a0b32592a0b936d3dde76557cb37d3b2b}{Sorting\+Type}} sorting\+Type, const int Tree\+Height, \mbox{\hyperlink{struct_f_mpi_tree_builder_1_1_indexed_particle}{Indexed\+Particle}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}const output\+Sorted\+Particles, FSize \texorpdfstring{$\ast$}{*}const output\+Nb\+Particles\+Sorted)
\item 
static void \mbox{\hyperlink{class_f_mpi_tree_builder_a51782f17a0080f1e9bb6eb897e1202c3}{Get\+Sorted\+Particles\+From\+Array}} (const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&communicator, const Particle\+Class in\+Original\+Particles\mbox{[}$\,$\mbox{]}, const FSize original\+Nb\+Particles, const \mbox{\hyperlink{class_f_mpi_tree_builder_a0b32592a0b936d3dde76557cb37d3b2b}{Sorting\+Type}} sorting\+Type, const \mbox{\hyperlink{class_f_point}{FPoint}}$<$ FReal $>$ \&center\+Of\+Box, const FReal box\+Width, const int Tree\+Height, \mbox{\hyperlink{struct_f_mpi_tree_builder_1_1_indexed_particle}{Indexed\+Particle}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}const output\+Sorted\+Particles, FSize \texorpdfstring{$\ast$}{*}const output\+Nb\+Particles\+Sorted)
\item 
\Hypertarget{class_f_mpi_tree_builder_a2e2e2b5f597d7739eea3c46c4b83f80e}\label{class_f_mpi_tree_builder_a2e2e2b5f597d7739eea3c46c4b83f80e} 
static void {\bfseries Merge\+Splited\+Leaves} (const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&communicator, \mbox{\hyperlink{struct_f_mpi_tree_builder_1_1_indexed_particle}{Indexed\+Particle}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}working\+Array, FSize \texorpdfstring{$\ast$}{*}working\+Size, FSize \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}leaves\+Offset\+In\+Particles, Particle\+Class \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}particles\+Array\+In\+Leaf\+Order, FSize \texorpdfstring{$\ast$}{*}const leaves\+Size)
\item 
{\footnotesize template$<$class Container\+Class $>$ }\\static void \mbox{\hyperlink{class_f_mpi_tree_builder_a422db64af66cb5a3573c3b91f4d31446}{Equalize\+And\+Fill\+Container}} (const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&communicator, Container\+Class \texorpdfstring{$\ast$}{*}particles\+Saver, const FSize leaves\+Offset\+In\+Particles\mbox{[}$\,$\mbox{]}, const Particle\+Class particles\+Array\+In\+Leaf\+Order\mbox{[}$\,$\mbox{]}, const FSize current\+Nb\+Leaves, const FSize current\+Nb\+Parts, \mbox{\hyperlink{class_f_abstract_balance_algorithm}{FAbstract\+Balance\+Algorithm}} \texorpdfstring{$\ast$}{*}balancer)
\item 
\Hypertarget{class_f_mpi_tree_builder_a4423c1f15b47bee5d4ca3cd10ff3de4f}\label{class_f_mpi_tree_builder_a4423c1f15b47bee5d4ca3cd10ff3de4f} 
{\footnotesize template$<$class Container\+Class $>$ }\\static void {\bfseries Distribute\+Array\+To\+Container} (const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&communicator, const Particle\+Class original\+Particles\+Array\mbox{[}$\,$\mbox{]}, const FSize original\+Nb\+Particles, const \mbox{\hyperlink{class_f_point}{FPoint}}$<$ FReal $>$ \&box\+Center, const FReal box\+Width, const int tree\+Height, Container\+Class \texorpdfstring{$\ast$}{*}particle\+Saver, \mbox{\hyperlink{class_f_abstract_balance_algorithm}{FAbstract\+Balance\+Algorithm}} \texorpdfstring{$\ast$}{*}balancer, const \mbox{\hyperlink{class_f_mpi_tree_builder_a0b32592a0b936d3dde76557cb37d3b2b}{Sorting\+Type}} sorting\+Type=Quick\+Sort)
\end{DoxyCompactItemize}


\doxysubsection{详细描述}
\subsubsection*{template$<$class FReal, class Particle\+Class$>$\newline
class FMpi\+Tree\+Builder$<$ FReal, Particle\+Class $>$}
This class manage the loading of particles for the mpi version. It work in several steps. First it load the data from a file or an array and sort them amon the MPI processes. Then, it carrefully manage if a leaf is shared by multiple processes. Finally it balances the data using an external interval builder. 

\doxysubsection{成员枚举类型说明}
\Hypertarget{class_f_mpi_tree_builder_a0b32592a0b936d3dde76557cb37d3b2b}\label{class_f_mpi_tree_builder_a0b32592a0b936d3dde76557cb37d3b2b} 
\index{FMpiTreeBuilder$<$ FReal, ParticleClass $>$@{FMpiTreeBuilder$<$ FReal, ParticleClass $>$}!SortingType@{SortingType}}
\index{SortingType@{SortingType}!FMpiTreeBuilder$<$ FReal, ParticleClass $>$@{FMpiTreeBuilder$<$ FReal, ParticleClass $>$}}
\doxysubsubsection{\texorpdfstring{SortingType}{SortingType}}
{\footnotesize\ttfamily template$<$class FReal , class Particle\+Class $>$ \\
enum \mbox{\hyperlink{class_f_mpi_tree_builder_a0b32592a0b936d3dde76557cb37d3b2b}{FMpi\+Tree\+Builder\+::\+Sorting\+Type}}}

What sorting algorithm to use 

\doxysubsection{成员函数说明}
\Hypertarget{class_f_mpi_tree_builder_a422db64af66cb5a3573c3b91f4d31446}\label{class_f_mpi_tree_builder_a422db64af66cb5a3573c3b91f4d31446} 
\index{FMpiTreeBuilder$<$ FReal, ParticleClass $>$@{FMpiTreeBuilder$<$ FReal, ParticleClass $>$}!EqualizeAndFillContainer@{EqualizeAndFillContainer}}
\index{EqualizeAndFillContainer@{EqualizeAndFillContainer}!FMpiTreeBuilder$<$ FReal, ParticleClass $>$@{FMpiTreeBuilder$<$ FReal, ParticleClass $>$}}
\doxysubsubsection{\texorpdfstring{EqualizeAndFillContainer()}{EqualizeAndFillContainer()}}
{\footnotesize\ttfamily template$<$class FReal , class Particle\+Class $>$ \\
template$<$class Container\+Class $>$ \\
static void \mbox{\hyperlink{class_f_mpi_tree_builder}{FMpi\+Tree\+Builder}}$<$ FReal, Particle\+Class $>$\+::\+Equalize\+And\+Fill\+Container (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&}]{communicator,  }\item[{Container\+Class \texorpdfstring{$\ast$}{*}}]{particles\+Saver,  }\item[{const FSize}]{leaves\+Offset\+In\+Particles\mbox{[}$\,$\mbox{]},  }\item[{const Particle\+Class}]{particles\+Array\+In\+Leaf\+Order\mbox{[}$\,$\mbox{]},  }\item[{const FSize}]{current\+Nb\+Leaves,  }\item[{const FSize}]{current\+Nb\+Parts,  }\item[{\mbox{\hyperlink{class_f_abstract_balance_algorithm}{FAbstract\+Balance\+Algorithm}} \texorpdfstring{$\ast$}{*}}]{balancer }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

Put the interval into a tree \Hypertarget{class_f_mpi_tree_builder_a51782f17a0080f1e9bb6eb897e1202c3}\label{class_f_mpi_tree_builder_a51782f17a0080f1e9bb6eb897e1202c3} 
\index{FMpiTreeBuilder$<$ FReal, ParticleClass $>$@{FMpiTreeBuilder$<$ FReal, ParticleClass $>$}!GetSortedParticlesFromArray@{GetSortedParticlesFromArray}}
\index{GetSortedParticlesFromArray@{GetSortedParticlesFromArray}!FMpiTreeBuilder$<$ FReal, ParticleClass $>$@{FMpiTreeBuilder$<$ FReal, ParticleClass $>$}}
\doxysubsubsection{\texorpdfstring{GetSortedParticlesFromArray()}{GetSortedParticlesFromArray()}}
{\footnotesize\ttfamily template$<$class FReal , class Particle\+Class $>$ \\
static void \mbox{\hyperlink{class_f_mpi_tree_builder}{FMpi\+Tree\+Builder}}$<$ FReal, Particle\+Class $>$\+::\+Get\+Sorted\+Particles\+From\+Array (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&}]{communicator,  }\item[{const Particle\+Class}]{in\+Original\+Particles\mbox{[}$\,$\mbox{]},  }\item[{const FSize}]{original\+Nb\+Particles,  }\item[{const \mbox{\hyperlink{class_f_mpi_tree_builder_a0b32592a0b936d3dde76557cb37d3b2b}{Sorting\+Type}}}]{sorting\+Type,  }\item[{const \mbox{\hyperlink{class_f_point}{FPoint}}$<$ FReal $>$ \&}]{center\+Of\+Box,  }\item[{const FReal}]{box\+Width,  }\item[{const int}]{Tree\+Height,  }\item[{\mbox{\hyperlink{struct_f_mpi_tree_builder_1_1_indexed_particle}{Indexed\+Particle}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}const}]{output\+Sorted\+Particles,  }\item[{FSize \texorpdfstring{$\ast$}{*}const}]{output\+Nb\+Particles\+Sorted }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

Get an array of particles sorted from their morton indexes \Hypertarget{class_f_mpi_tree_builder_aa63afe2b99f0a7ff242134bef377758b}\label{class_f_mpi_tree_builder_aa63afe2b99f0a7ff242134bef377758b} 
\index{FMpiTreeBuilder$<$ FReal, ParticleClass $>$@{FMpiTreeBuilder$<$ FReal, ParticleClass $>$}!GetSortedParticlesFromLoader@{GetSortedParticlesFromLoader}}
\index{GetSortedParticlesFromLoader@{GetSortedParticlesFromLoader}!FMpiTreeBuilder$<$ FReal, ParticleClass $>$@{FMpiTreeBuilder$<$ FReal, ParticleClass $>$}}
\doxysubsubsection{\texorpdfstring{GetSortedParticlesFromLoader()}{GetSortedParticlesFromLoader()}}
{\footnotesize\ttfamily template$<$class FReal , class Particle\+Class $>$ \\
template$<$class Loader\+Class $>$ \\
static void \mbox{\hyperlink{class_f_mpi_tree_builder}{FMpi\+Tree\+Builder}}$<$ FReal, Particle\+Class $>$\+::\+Get\+Sorted\+Particles\+From\+Loader (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{class_f_mpi_1_1_f_comm}{FMpi\+::\+FComm}} \&}]{communicator,  }\item[{Loader\+Class \&}]{loader,  }\item[{const \mbox{\hyperlink{class_f_mpi_tree_builder_a0b32592a0b936d3dde76557cb37d3b2b}{Sorting\+Type}}}]{sorting\+Type,  }\item[{const int}]{Tree\+Height,  }\item[{\mbox{\hyperlink{struct_f_mpi_tree_builder_1_1_indexed_particle}{Indexed\+Particle}} \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}const}]{output\+Sorted\+Particles,  }\item[{FSize \texorpdfstring{$\ast$}{*}const}]{output\+Nb\+Particles\+Sorted }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}

Get an array of particles sorted from their morton indexes 

该类的文档由以下文件生成\+:\begin{DoxyCompactItemize}
\item 
third\+\_\+party/\+Scal\+FMM/include/\+Scal\+FMM/\+Files/FMpi\+Tree\+Builder.\+hpp\end{DoxyCompactItemize}
